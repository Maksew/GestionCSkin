<Window x:Class="GestionCSkin.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:GestionCSkin.Converters"
        xmlns:model="clr-namespace:GestionCSkin.Model"
        Title="GestionCSkin" Height="800" Width="1200">
    
    <Window.Resources>
        <!-- Convertisseurs -->
        <converters:ImagePathConverter x:Key="ImagePathConverter"/>
        <converters:ProfitColorConverter x:Key="ProfitColorConverter"/>
        <converters:FloatPositionConverter x:Key="FloatPositionConverter"/>
    </Window.Resources>

    <Grid Background="{StaticResource MainBackgroundColor}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />  <!-- Barre de navigation -->
            <RowDefinition Height="Auto" />  <!-- Catégories -->
            <RowDefinition Height="*" />     <!-- Contenu principal -->
        </Grid.RowDefinitions>

        <!-- Barre de navigation supérieure (identique) -->
        <DockPanel Grid.Row="0" Background="{StaticResource NavBarBackground}">
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" VerticalAlignment="Center">
                <TextBlock Width="174" Margin="30,0,0,0">
                    <Run Foreground="#FFFF6B00" FontSize="26" FontWeight="Bold" Text="Gestion"/>
                    <Run Foreground="White" FontSize="26" FontWeight="Bold" Text="CSkin"/>
                </TextBlock>
            </StackPanel>

            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" VerticalAlignment="Center" HorizontalAlignment="Right">
                <Button Content="Calculate Profit" Style="{StaticResource NavButtonStyle}" 
                        Command="{Binding OpenProfitCalculatorCommand}" />
                <Button Content="Statistics" Style="{StaticResource NavButtonStyle}" 
                        Command="{Binding OpenStatisticsCommand}" />
                <Button Content="Sales" Style="{StaticResource NavButtonStyle}" 
                        Command="{Binding OpenSalesCommand}" />
                <Button Content="Add" Style="{StaticResource NavButtonStyle}" Margin="0,0,30,0" 
                        Command="{Binding OpenAddSkinCommand}" />
            </StackPanel>
        </DockPanel>

        <!-- Barre de catégories (identique) -->
        <UniformGrid Grid.Row="1" Columns="10" Background="{StaticResource ProductCategoryBackground}">
            <Button Content="Knife" Style="{StaticResource CategoryButtonStyle}" Command="{Binding SelectKnifeCommand}" />
            <Button Content="Rifle" Style="{StaticResource CategoryButtonStyle}" Command="{Binding SelectRifleCommand}" />
            <Button Content="Gants" Style="{StaticResource CategoryButtonStyle}" Command="{Binding SelectGantsCommand}" />
            <Button Content="Smg" Style="{StaticResource CategoryButtonStyle}" Command="{Binding SelectSmgCommand}" />
            <Button Content="Pistol" Style="{StaticResource CategoryButtonStyle}" Command="{Binding SelectPistolCommand}" />
            <Button Content="Others" Style="{StaticResource CategoryButtonStyle}" Command="{Binding SelectOthersCommand}" />
            <Button Content="Agents" Style="{StaticResource CategoryButtonStyle}" Command="{Binding SelectAgentsCommand}" />
            <Button Content="Heavy" Style="{StaticResource LastCategoryButtonStyle}" Command="{Binding SelectHeavyCommand}" />
        </UniformGrid>

        <!-- Barre blanche sous les catégories (identique) -->
        <Border Grid.Row="1" Height="2" Background="White" VerticalAlignment="Bottom" />

        <!-- Liste des skins (NOUVEAU CONTENU) -->
        <ScrollViewer Grid.Row="2" Padding="20">
            <ItemsControl ItemsSource="{Binding Skins}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate DataType="{x:Type model:Skin}">
                        <Border Background="#333333" Padding="15" Margin="10" Width="280" CornerRadius="5">
                            <StackPanel>
                                <!-- Image -->
                                <Image Source="{Binding ImagePath, Converter={StaticResource ImagePathConverter}}" 
                                       Height="160" Stretch="UniformToFill"/>

                                <!-- Nom et Type -->
                                <TextBlock Text="{Binding Name}" 
                                         Foreground="White" 
                                         FontSize="18" 
                                         Margin="0,10"
                                         TextAlignment="Center"/>

                                <TextBlock Text="{Binding Type}" 
                                         Foreground="#B5B5B5" 
                                         FontSize="14"
                                         HorizontalAlignment="Center"/>

                                <!-- Prix et Profit -->
                                <Grid Margin="0,10" HorizontalAlignment="Center">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                        <TextBlock Text="Achat :" Foreground="#B5B5B5"/>
                                        <TextBlock Text="{Binding BuyPrice, StringFormat={}{0:C} €}" Foreground="White"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Profit :" Foreground="#B5B5B5"/>
                                        <TextBlock Text="{Binding Profit, StringFormat={}{0:C} €}" 
                                                 Foreground="{Binding Profit, Converter={StaticResource ProfitColorConverter}}"/>
                                    </StackPanel>
                                </Grid>

                                <!-- Barre de float -->
                                <Border Background="#444444" Padding="10" CornerRadius="5">
                                    <Canvas Height="40" Width="240">
                                        <Rectangle Fill="DarkGreen" Width="40" Height="20" Canvas.Left="10"/>
                                        <Rectangle Fill="LightGreen" Width="40" Height="20" Canvas.Left="50"/>
                                        <Rectangle Fill="Yellow" Width="40" Height="20" Canvas.Left="90"/>
                                        <Rectangle Fill="Orange" Width="40" Height="20" Canvas.Left="130"/>
                                        <Rectangle Fill="Red" Width="40" Height="20" Canvas.Left="170"/>
                                        
                                        <Polygon Points="5,0 15,0 10,10" 
                                               Fill="White"
                                               Canvas.Left="{Binding FloatValue, Converter={StaticResource FloatPositionConverter}}"
                                               Canvas.Top="5"/>
                                    </Canvas>
                                </Border>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Window>